<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alpine.js</title>
    <!-- Alpine -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font-Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body class="bg-gray-100">
    <!-- ! Primer contenedor -->
    <div x-data="data()" x-init="iniciar()"
        class="mx-auto w-1/3 shadow-lg p-4 rounded-lg mt-10 flex flex-col items-center bg-white">
        <button @click="sumar()"
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Increment</button>
        <span x-text="contador" class="text-2xl font-bold"></span>
        <button @click="restar()"
            class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">Decrement</button>
    </div>
    <!--! Segundo contenedor -->
    <div class="mx-auto w-1/3 shadow-lg p-4 rounded-lg mt-10 flex flex-col items-center bg-white" x-data="data()">
        <div>
            <button class="bg-blue-500  text-white font-bold py-2 px-4 rounded" @click="toggleMenu()"
                x-bind:disabled="menu" :class="{
                    'bg-blue-500': !menu,
                    'bg-blue-300': menu
                }">
                <i class="fa-solid fa-bars"></i>
            </button>
            <div x-show="menu" @click.away="ocultar()" class="mt-4 transition-all duration-300">
                <ul>
                    <li>Item 1</li>
                    <li>Item 2</li>
                    <li>Item 3</li>
                </ul>
            </div>
        </div>

    </div>
    <!--! Tercer contenedor -->
    <div class="mx-auto w-1/3 shadow-lg p-4 rounded-lg mt-10 flex flex-col items-center bg-white" x-data="data()">
        <label for="">
            Ingresa texto
            <input type="text" x-model="mensaje" class="border-b-2 border-blue-300 ml-2 mt-4 pl-2">
        </label>
        <p x-text="mensaje" class=" text-center text-sky-400"></p>
    </div>
    <div class="mx-auto w-1/3 shadow-lg p-4 rounded-lg mt-10 flex flex-col items-center bg-white" x-data="data()">
        <label for="">
            Ingresa texto
            <input type="text" x-model="mensajeOrigen" class="border-b-2 border-blue-300 ml-2 mt-4 pl-2">
            <button @click="cambiarMensaje()" class="bg-blue-500 text-white font-bold my-1 py-1 px-3 rounded">
                Cambiar
            </button>
        </label>
        <p x-ref="mensaje" class=" text-center text-sky-400"></p>
    </div>
    <!-- ! Cuarto contenedor -->
    <div class="mx-auto w-1/3 shadow-lg p-4 rounded-lg mt-10 flex justify-center bg-white" x-data="data()">
        <ul>
            <template x-for="product in products">
                <li class="list-disc">
                    <span x-text="product.id"></span> -
                    <span x-text="product.name"></span>
                    <template x-if="product.stock < 3 ">
                        <div class="inline">
                            (<span x-text="product.stock" class="text-red-500"></span>)
                            <span> Casi agotado</span>
                        </div>
                    </template>
                </li>
            </template>
        </ul>
    </div>


    <!-- ^ SCRIPTS -->
    <script>
        function data() {
            return {
                products: [
                    {
                        id: 1,
                        name: 'Pantalon',
                        stock: 1
                    },
                    {
                        id: 2,
                        name: 'Camiseta',
                        stock: 9
                    },
                    {
                        id: 3,
                        name: 'Zapatos',
                        stock: 6
                    },
                    {
                        id: 4,
                        name: 'Bufanda',
                        stock: 2
                    }
                ],

                mensaje: '',
                mensajeOrigen: null,
                contador: 0,
                menu: false,
                iniciar() {
                    this.contador = 10;
                },
                sumar() {
                    this.contador++
                },
                restar() {
                    this.contador--
                },
                toggleMenu() {
                    this.menu = !this.menu
                },
                ocultar() {
                    this.menu = false
                },
                cambiarMensaje() {
                    this.$refs.mensaje.textContent = this.mensajeOrigen
                }

            }
        }
    </script>
</body>

</html>
